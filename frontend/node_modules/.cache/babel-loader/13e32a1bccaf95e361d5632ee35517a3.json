{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useState}from\"react\";import{Grid,TextField,Button,Typography,makeStyles,Paper}from\"@material-ui/core\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";import PasswordInput from\"../lib/PasswordInput\";import EmailInput from\"../lib/EmailInput\";import{SetPopupContext}from\"../App\";import apiList from\"../lib/apiList\";import isAuth from\"../lib/isAuth\";var useStyles=makeStyles(function(theme){return{body:{padding:\"60px 60px\"},inputBox:{width:\"300px\"},submitButton:{width:\"300px\"}};});var Login=function Login(props){var classes=useStyles();var setPopup=useContext(SetPopupContext);var _useState=useState(isAuth()),_useState2=_slicedToArray(_useState,2),loggedin=_useState2[0],setLoggedin=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),loginDetails=_useState4[0],setLoginDetails=_useState4[1];var _useState5=useState({email:{error:false,message:\"\"},password:{error:false,message:\"\"}}),_useState6=_slicedToArray(_useState5,2),inputErrorHandler=_useState6[0],setInputErrorHandler=_useState6[1];var handleInput=function handleInput(key,value){setLoginDetails(_objectSpread(_objectSpread({},loginDetails),{},_defineProperty({},key,value)));};var handleInputError=function handleInputError(key,status,message){setInputErrorHandler(_objectSpread(_objectSpread({},inputErrorHandler),{},_defineProperty({},key,{error:status,message:message})));};var handleLogin=function handleLogin(){var verified=!Object.keys(inputErrorHandler).some(function(obj){return inputErrorHandler[obj].error;});if(verified){axios.post(apiList.login,loginDetails).then(function(response){localStorage.setItem(\"token\",response.data.token);localStorage.setItem(\"type\",response.data.type);setLoggedin(isAuth());setPopup({open:true,severity:\"success\",message:\"Logged in successfully\"});console.log(response);}).catch(function(err){setPopup({open:true,severity:\"error\",message:err.response.data.message});console.log(err.response);});}else{setPopup({open:true,severity:\"error\",message:\"Incorrect Input\"});}};return loggedin?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Paper,{elevation:3,className:classes.body,children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",spacing:4,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",children:\"Login\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(EmailInput,{label:\"Email\",value:loginDetails.email,onChange:function onChange(event){return handleInput(\"email\",event.target.value);},inputErrorHandler:inputErrorHandler,handleInputError:handleInputError,className:classes.inputBox})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(PasswordInput,{label:\"Password\",value:loginDetails.password,onChange:function onChange(event){return handleInput(\"password\",event.target.value);},className:classes.inputBox})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){return handleLogin();},className:classes.submitButton,children:\"Login\"})})]})});};export default Login;","map":{"version":3,"sources":["/home/shera/Desktop/React/job-portal-main/frontend/src/component/Login.js"],"names":["useContext","useState","Grid","TextField","Button","Typography","makeStyles","Paper","axios","Redirect","PasswordInput","EmailInput","SetPopupContext","apiList","isAuth","useStyles","theme","body","padding","inputBox","width","submitButton","Login","props","classes","setPopup","loggedin","setLoggedin","email","password","loginDetails","setLoginDetails","error","message","inputErrorHandler","setInputErrorHandler","handleInput","key","value","handleInputError","status","handleLogin","verified","Object","keys","some","obj","post","login","then","response","localStorage","setItem","data","token","type","open","severity","console","log","catch","err","event","target"],"mappings":"olBAAA,OAASA,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OACEC,IADF,CAEEC,SAFF,CAGEC,MAHF,CAIEC,UAJF,CAKEC,UALF,CAMEC,KANF,KAOO,mBAPP,CAQA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,MAAOC,CAAAA,aAAP,KAA0B,sBAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,OAASC,eAAT,KAAgC,QAAhC,CAEA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CAEA,GAAMC,CAAAA,SAAS,CAAGT,UAAU,CAAC,SAACU,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,OAAO,CAAE,WADL,CADiC,CAIvCC,QAAQ,CAAE,CACRC,KAAK,CAAE,OADC,CAJ6B,CAOvCC,YAAY,CAAE,CACZD,KAAK,CAAE,OADK,CAPyB,CAAZ,EAAD,CAA5B,CAYA,GAAME,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACvB,GAAMC,CAAAA,OAAO,CAAGT,SAAS,EAAzB,CACA,GAAMU,CAAAA,QAAQ,CAAGzB,UAAU,CAACY,eAAD,CAA3B,CAFuB,cAISX,QAAQ,CAACa,MAAM,EAAP,CAJjB,wCAIhBY,QAJgB,eAINC,WAJM,8BAMiB1B,QAAQ,CAAC,CAC/C2B,KAAK,CAAE,EADwC,CAE/CC,QAAQ,CAAE,EAFqC,CAAD,CANzB,yCAMhBC,YANgB,eAMFC,eANE,8BAW2B9B,QAAQ,CAAC,CACzD2B,KAAK,CAAE,CACLI,KAAK,CAAE,KADF,CAELC,OAAO,CAAE,EAFJ,CADkD,CAKzDJ,QAAQ,CAAE,CACRG,KAAK,CAAE,KADC,CAERC,OAAO,CAAE,EAFD,CAL+C,CAAD,CAXnC,yCAWhBC,iBAXgB,eAWGC,oBAXH,eAsBvB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,GAAD,CAAMC,KAAN,CAAgB,CAClCP,eAAe,gCACVD,YADU,wBAEZO,GAFY,CAENC,KAFM,GAAf,CAID,CALD,CAOA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACF,GAAD,CAAMG,MAAN,CAAcP,OAAd,CAA0B,CACjDE,oBAAoB,gCACfD,iBADe,wBAEjBG,GAFiB,CAEX,CACLL,KAAK,CAAEQ,MADF,CAELP,OAAO,CAAEA,OAFJ,CAFW,GAApB,CAOD,CARD,CAUA,GAAMQ,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAMC,CAAAA,QAAQ,CAAG,CAACC,MAAM,CAACC,IAAP,CAAYV,iBAAZ,EAA+BW,IAA/B,CAAoC,SAACC,GAAD,CAAS,CAC7D,MAAOZ,CAAAA,iBAAiB,CAACY,GAAD,CAAjB,CAAuBd,KAA9B,CACD,CAFiB,CAAlB,CAGA,GAAIU,QAAJ,CAAc,CACZlC,KAAK,CACFuC,IADH,CACQlC,OAAO,CAACmC,KADhB,CACuBlB,YADvB,EAEGmB,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,QAAQ,CAACG,IAAT,CAAcC,KAA5C,EACAH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BF,QAAQ,CAACG,IAAT,CAAcE,IAA3C,EACA5B,WAAW,CAACb,MAAM,EAAP,CAAX,CACAW,QAAQ,CAAC,CACP+B,IAAI,CAAE,IADC,CAEPC,QAAQ,CAAE,SAFH,CAGPxB,OAAO,CAAE,wBAHF,CAAD,CAAR,CAKAyB,OAAO,CAACC,GAAR,CAAYT,QAAZ,EACD,CAZH,EAaGU,KAbH,CAaS,SAACC,GAAD,CAAS,CACdpC,QAAQ,CAAC,CACP+B,IAAI,CAAE,IADC,CAEPC,QAAQ,CAAE,OAFH,CAGPxB,OAAO,CAAE4B,GAAG,CAACX,QAAJ,CAAaG,IAAb,CAAkBpB,OAHpB,CAAD,CAAR,CAKAyB,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACX,QAAhB,EACD,CApBH,EAqBD,CAtBD,IAsBO,CACLzB,QAAQ,CAAC,CACP+B,IAAI,CAAE,IADC,CAEPC,QAAQ,CAAE,OAFH,CAGPxB,OAAO,CAAE,iBAHF,CAAD,CAAR,CAKD,CACF,CAjCD,CAmCA,MAAOP,CAAAA,QAAQ,cACb,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADa,cAGb,KAAC,KAAD,EAAO,SAAS,CAAE,CAAlB,CAAqB,SAAS,CAAEF,OAAO,CAACP,IAAxC,uBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,SAAS,CAAC,QAA1B,CAAmC,OAAO,CAAE,CAA5C,CAA+C,UAAU,CAAC,QAA1D,wBACE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAC,IAAnC,mBADF,EADF,cAME,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,UAAD,EACE,KAAK,CAAC,OADR,CAEE,KAAK,CAAEa,YAAY,CAACF,KAFtB,CAGE,QAAQ,CAAE,kBAACkC,KAAD,QAAW1B,CAAAA,WAAW,CAAC,OAAD,CAAU0B,KAAK,CAACC,MAAN,CAAazB,KAAvB,CAAtB,EAHZ,CAIE,iBAAiB,CAAEJ,iBAJrB,CAKE,gBAAgB,CAAEK,gBALpB,CAME,SAAS,CAAEf,OAAO,CAACL,QANrB,EADF,EANF,cAgBE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,aAAD,EACE,KAAK,CAAC,UADR,CAEE,KAAK,CAAEW,YAAY,CAACD,QAFtB,CAGE,QAAQ,CAAE,kBAACiC,KAAD,QAAW1B,CAAAA,WAAW,CAAC,UAAD,CAAa0B,KAAK,CAACC,MAAN,CAAazB,KAA1B,CAAtB,EAHZ,CAIE,SAAS,CAAEd,OAAO,CAACL,QAJrB,EADF,EAhBF,cAwBE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,SAFR,CAGE,OAAO,CAAE,yBAAMsB,CAAAA,WAAW,EAAjB,EAHX,CAIE,SAAS,CAAEjB,OAAO,CAACH,YAJrB,mBADF,EAxBF,GADF,EAHF,CAyCD,CAnHD,CAqHA,cAAeC,CAAAA,KAAf","sourcesContent":["import { useContext, useState } from \"react\";\nimport {\n  Grid,\n  TextField,\n  Button,\n  Typography,\n  makeStyles,\n  Paper,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nimport PasswordInput from \"../lib/PasswordInput\";\nimport EmailInput from \"../lib/EmailInput\";\nimport { SetPopupContext } from \"../App\";\n\nimport apiList from \"../lib/apiList\";\nimport isAuth from \"../lib/isAuth\";\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    padding: \"60px 60px\",\n  },\n  inputBox: {\n    width: \"300px\",\n  },\n  submitButton: {\n    width: \"300px\",\n  },\n}));\n\nconst Login = (props) => {\n  const classes = useStyles();\n  const setPopup = useContext(SetPopupContext);\n\n  const [loggedin, setLoggedin] = useState(isAuth());\n\n  const [loginDetails, setLoginDetails] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [inputErrorHandler, setInputErrorHandler] = useState({\n    email: {\n      error: false,\n      message: \"\",\n    },\n    password: {\n      error: false,\n      message: \"\",\n    },\n  });\n\n  const handleInput = (key, value) => {\n    setLoginDetails({\n      ...loginDetails,\n      [key]: value,\n    });\n  };\n\n  const handleInputError = (key, status, message) => {\n    setInputErrorHandler({\n      ...inputErrorHandler,\n      [key]: {\n        error: status,\n        message: message,\n      },\n    });\n  };\n\n  const handleLogin = () => {\n    const verified = !Object.keys(inputErrorHandler).some((obj) => {\n      return inputErrorHandler[obj].error;\n    });\n    if (verified) {\n      axios\n        .post(apiList.login, loginDetails)\n        .then((response) => {\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"type\", response.data.type);\n          setLoggedin(isAuth());\n          setPopup({\n            open: true,\n            severity: \"success\",\n            message: \"Logged in successfully\",\n          });\n          console.log(response);\n        })\n        .catch((err) => {\n          setPopup({\n            open: true,\n            severity: \"error\",\n            message: err.response.data.message,\n          });\n          console.log(err.response);\n        });\n    } else {\n      setPopup({\n        open: true,\n        severity: \"error\",\n        message: \"Incorrect Input\",\n      });\n    }\n  };\n\n  return loggedin ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Paper elevation={3} className={classes.body}>\n      <Grid container direction=\"column\" spacing={4} alignItems=\"center\">\n        <Grid item>\n          <Typography variant=\"h3\" component=\"h2\">\n            Login\n          </Typography>\n        </Grid>\n        <Grid item>\n          <EmailInput\n            label=\"Email\"\n            value={loginDetails.email}\n            onChange={(event) => handleInput(\"email\", event.target.value)}\n            inputErrorHandler={inputErrorHandler}\n            handleInputError={handleInputError}\n            className={classes.inputBox}\n          />\n        </Grid>\n        <Grid item>\n          <PasswordInput\n            label=\"Password\"\n            value={loginDetails.password}\n            onChange={(event) => handleInput(\"password\", event.target.value)}\n            className={classes.inputBox}\n          />\n        </Grid>\n        <Grid item>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => handleLogin()}\n            className={classes.submitButton}\n          >\n            Login\n          </Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}