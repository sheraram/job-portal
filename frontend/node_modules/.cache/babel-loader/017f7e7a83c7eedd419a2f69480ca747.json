{"ast":null,"code":"import _defineProperty from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/home/shera/Desktop/React/job-portal-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useContext,useEffect,useState}from\"react\";import{Button,Grid,Typography,Modal,Paper,makeStyles,TextField}from\"@material-ui/core\";import axios from\"axios\";import ChipInput from\"material-ui-chip-input\";import FileUploadInput from\"../lib/FileUploadInput\";import DescriptionIcon from\"@material-ui/icons/Description\";import FaceIcon from\"@material-ui/icons/Face\";import{SetPopupContext}from\"../App\";import apiList from\"../lib/apiList\";var useStyles=makeStyles(function(theme){return{body:{height:\"inherit\"},popupDialog:{height:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"// padding: \"30px\",\n}};});var MultifieldInput=function MultifieldInput(props){var classes=useStyles();var education=props.education,setEducation=props.setEducation;return/*#__PURE__*/_jsxs(_Fragment,{children:[education.map(function(obj,key){return/*#__PURE__*/_jsxs(Grid,{item:true,container:true,className:classes.inputBox,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(TextField,{label:\"Institution Name #\".concat(key+1),value:education[key].institutionName,onChange:function onChange(event){var newEdu=_toConsumableArray(education);newEdu[key].institutionName=event.target.value;setEducation(newEdu);},variant:\"outlined\",fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsx(TextField,{label:\"Start Year\",value:obj.startYear,variant:\"outlined\",type:\"number\",onChange:function onChange(event){var newEdu=_toConsumableArray(education);newEdu[key].startYear=event.target.value;setEducation(newEdu);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsx(TextField,{label:\"End Year\",value:obj.endYear,variant:\"outlined\",type:\"number\",onChange:function onChange(event){var newEdu=_toConsumableArray(education);newEdu[key].endYear=event.target.value;setEducation(newEdu);}})})]},key);}),/*#__PURE__*/_jsx(Grid,{item:true,style:{alignSelf:\"center\"},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(){return setEducation([].concat(_toConsumableArray(education),[{institutionName:\"\",startYear:\"\",endYear:\"\"}]));},className:classes.inputBox,children:\"Add another institution details\"})})]});};var Profile=function Profile(props){var classes=useStyles();var setPopup=useContext(SetPopupContext);var _useState=useState(),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState({name:\"\",education:[],skills:[],resume:\"\",profile:\"\"}),_useState6=_slicedToArray(_useState5,2),profileDetails=_useState6[0],setProfileDetails=_useState6[1];var _useState7=useState([{institutionName:\"\",startYear:\"\",endYear:\"\"}]),_useState8=_slicedToArray(_useState7,2),education=_useState8[0],setEducation=_useState8[1];var handleInput=function handleInput(key,value){setProfileDetails(_objectSpread(_objectSpread({},profileDetails),{},_defineProperty({},key,value)));};useEffect(function(){getData();},[]);var getData=function getData(){axios.get(apiList.user,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(response){console.log(response.data);setProfileDetails(response.data);if(response.data.education.length>0){setEducation(response.data.education.map(function(edu){return{institutionName:edu.institutionName?edu.institutionName:\"\",startYear:edu.startYear?edu.startYear:\"\",endYear:edu.endYear?edu.endYear:\"\"};}));}}).catch(function(err){console.log(err.response.data);setPopup({open:true,severity:\"error\",message:\"Error\"});});};var handleClose=function handleClose(){setOpen(false);};var editDetails=function editDetails(){setOpen(true);};var handleUpdate=function handleUpdate(){console.log(education);var updatedDetails=_objectSpread(_objectSpread({},profileDetails),{},{education:education.filter(function(obj){return obj.institutionName.trim()!==\"\";}).map(function(obj){if(obj[\"endYear\"]===\"\"){delete obj[\"endYear\"];}return obj;})});axios.put(apiList.user,updatedDetails,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(response){setPopup({open:true,severity:\"success\",message:response.data.message});getData();}).catch(function(err){setPopup({open:true,severity:\"error\",message:err.response.data.message});console.log(err.response);});setOpen(false);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,item:true,direction:\"column\",alignItems:\"center\",style:{padding:\"30px\",minHeight:\"93vh\"},children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h2\",children:\"Profile\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:true,children:/*#__PURE__*/_jsxs(Paper,{style:{padding:\"20px\",outline:\"none\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",alignItems:\"stretch\",spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(TextField,{label:\"Name\",value:profileDetails.name,onChange:function onChange(event){return handleInput(\"name\",event.target.value);},className:classes.inputBox,variant:\"outlined\",fullWidth:true})}),/*#__PURE__*/_jsx(MultifieldInput,{education:education,setEducation:setEducation}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(ChipInput,{className:classes.inputBox,label:\"Skills\",variant:\"outlined\",helperText:\"Press enter to add skills\",value:profileDetails.skills,onAdd:function onAdd(chip){return setProfileDetails(_objectSpread(_objectSpread({},profileDetails),{},{skills:[].concat(_toConsumableArray(profileDetails.skills),[chip])}));},onDelete:function onDelete(chip,index){var skills=profileDetails.skills;skills.splice(index,1);setProfileDetails(_objectSpread(_objectSpread({},profileDetails),{},{skills:skills}));},fullWidth:true})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(FileUploadInput,{className:classes.inputBox,label:\"Resume (.pdf)\",icon:/*#__PURE__*/_jsx(DescriptionIcon,{}),uploadTo:apiList.uploadResume,handleInput:handleInput,identifier:\"resume\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(FileUploadInput,{className:classes.inputBox,label:\"Profile Photo (.jpg/.png)\",icon:/*#__PURE__*/_jsx(FaceIcon,{}),uploadTo:apiList.uploadProfileImage,handleInput:handleInput,identifier:\"profile\"})})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",style:{padding:\"10px 50px\",marginTop:\"30px\"},onClick:function onClick(){return handleUpdate();},children:\"Update Details\"})]})})]})});};export default Profile;","map":{"version":3,"sources":["/home/shera/Desktop/React/job-portal-main/frontend/src/component/Profile.js"],"names":["useContext","useEffect","useState","Button","Grid","Typography","Modal","Paper","makeStyles","TextField","axios","ChipInput","FileUploadInput","DescriptionIcon","FaceIcon","SetPopupContext","apiList","useStyles","theme","body","height","popupDialog","display","alignItems","justifyContent","MultifieldInput","props","classes","education","setEducation","map","obj","key","inputBox","institutionName","event","newEdu","target","value","startYear","endYear","alignSelf","Profile","setPopup","userData","setUserData","open","setOpen","name","skills","resume","profile","profileDetails","setProfileDetails","handleInput","getData","get","user","headers","Authorization","localStorage","getItem","then","response","console","log","data","length","edu","catch","err","severity","message","handleClose","editDetails","handleUpdate","updatedDetails","filter","trim","put","padding","minHeight","outline","flexDirection","chip","index","splice","uploadResume","uploadProfileImage","marginTop"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport {\n  Button,\n  Grid,\n  Typography,\n  Modal,\n  Paper,\n  makeStyles,\n  TextField,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport ChipInput from \"material-ui-chip-input\";\nimport FileUploadInput from \"../lib/FileUploadInput\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport FaceIcon from \"@material-ui/icons/Face\";\n\nimport { SetPopupContext } from \"../App\";\n\nimport apiList from \"../lib/apiList\";\n\nconst useStyles = makeStyles((theme) => ({\n  body: {\n    height: \"inherit\",\n  },\n  popupDialog: {\n    height: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    // padding: \"30px\",\n  },\n}));\n\nconst MultifieldInput = (props) => {\n  const classes = useStyles();\n  const { education, setEducation } = props;\n\n  return (\n    <>\n      {education.map((obj, key) => (\n        <Grid item container className={classes.inputBox} key={key}>\n          <Grid item xs={6}>\n            <TextField\n              label={`Institution Name #${key + 1}`}\n              value={education[key].institutionName}\n              onChange={(event) => {\n                const newEdu = [...education];\n                newEdu[key].institutionName = event.target.value;\n                setEducation(newEdu);\n              }}\n              variant=\"outlined\"\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs={3}>\n            <TextField\n              label=\"Start Year\"\n              value={obj.startYear}\n              variant=\"outlined\"\n              type=\"number\"\n              onChange={(event) => {\n                const newEdu = [...education];\n                newEdu[key].startYear = event.target.value;\n                setEducation(newEdu);\n              }}\n            />\n          </Grid>\n          <Grid item xs={3}>\n            <TextField\n              label=\"End Year\"\n              value={obj.endYear}\n              variant=\"outlined\"\n              type=\"number\"\n              onChange={(event) => {\n                const newEdu = [...education];\n                newEdu[key].endYear = event.target.value;\n                setEducation(newEdu);\n              }}\n            />\n          </Grid>\n        </Grid>\n      ))}\n      <Grid item style={{ alignSelf: \"center\" }}>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={() =>\n            setEducation([\n              ...education,\n              {\n                institutionName: \"\",\n                startYear: \"\",\n                endYear: \"\",\n              },\n            ])\n          }\n          className={classes.inputBox}\n        >\n          Add another institution details\n        </Button>\n      </Grid>\n    </>\n  );\n};\n\nconst Profile = (props) => {\n  const classes = useStyles();\n  const setPopup = useContext(SetPopupContext);\n  const [userData, setUserData] = useState();\n  const [open, setOpen] = useState(false);\n\n  const [profileDetails, setProfileDetails] = useState({\n    name: \"\",\n    education: [],\n    skills: [],\n    resume: \"\",\n    profile: \"\",\n  });\n\n  const [education, setEducation] = useState([\n    {\n      institutionName: \"\",\n      startYear: \"\",\n      endYear: \"\",\n    },\n  ]);\n\n  const handleInput = (key, value) => {\n    setProfileDetails({\n      ...profileDetails,\n      [key]: value,\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = () => {\n    axios\n      .get(apiList.user, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then((response) => {\n        console.log(response.data);\n        setProfileDetails(response.data);\n        if (response.data.education.length > 0) {\n          setEducation(\n            response.data.education.map((edu) => ({\n              institutionName: edu.institutionName ? edu.institutionName : \"\",\n              startYear: edu.startYear ? edu.startYear : \"\",\n              endYear: edu.endYear ? edu.endYear : \"\",\n            }))\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n        setPopup({\n          open: true,\n          severity: \"error\",\n          message: \"Error\",\n        });\n      });\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const editDetails = () => {\n    setOpen(true);\n  };\n\n  const handleUpdate = () => {\n    console.log(education);\n\n    let updatedDetails = {\n      ...profileDetails,\n      education: education\n        .filter((obj) => obj.institutionName.trim() !== \"\")\n        .map((obj) => {\n          if (obj[\"endYear\"] === \"\") {\n            delete obj[\"endYear\"];\n          }\n          return obj;\n        }),\n    };\n\n    axios\n      .put(apiList.user, updatedDetails, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then((response) => {\n        setPopup({\n          open: true,\n          severity: \"success\",\n          message: response.data.message,\n        });\n        getData();\n      })\n      .catch((err) => {\n        setPopup({\n          open: true,\n          severity: \"error\",\n          message: err.response.data.message,\n        });\n        console.log(err.response);\n      });\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Grid\n        container\n        item\n        direction=\"column\"\n        alignItems=\"center\"\n        style={{ padding: \"30px\", minHeight: \"93vh\" }}\n      >\n        <Grid item>\n          <Typography variant=\"h2\">Profile</Typography>\n        </Grid>\n        <Grid item xs>\n          <Paper\n            style={{\n              padding: \"20px\",\n              outline: \"none\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            }}\n          >\n            <Grid container direction=\"column\" alignItems=\"stretch\" spacing={3}>\n              <Grid item>\n                <TextField\n                  label=\"Name\"\n                  value={profileDetails.name}\n                  onChange={(event) => handleInput(\"name\", event.target.value)}\n                  className={classes.inputBox}\n                  variant=\"outlined\"\n                  fullWidth\n                />\n              </Grid>\n              <MultifieldInput\n                education={education}\n                setEducation={setEducation}\n              />\n              <Grid item>\n                <ChipInput\n                  className={classes.inputBox}\n                  label=\"Skills\"\n                  variant=\"outlined\"\n                  helperText=\"Press enter to add skills\"\n                  value={profileDetails.skills}\n                  onAdd={(chip) =>\n                    setProfileDetails({\n                      ...profileDetails,\n                      skills: [...profileDetails.skills, chip],\n                    })\n                  }\n                  onDelete={(chip, index) => {\n                    let skills = profileDetails.skills;\n                    skills.splice(index, 1);\n                    setProfileDetails({\n                      ...profileDetails,\n                      skills: skills,\n                    });\n                  }}\n                  fullWidth\n                />\n              </Grid>\n              <Grid item>\n                <FileUploadInput\n                  className={classes.inputBox}\n                  label=\"Resume (.pdf)\"\n                  icon={<DescriptionIcon />}\n                  uploadTo={apiList.uploadResume}\n                  handleInput={handleInput}\n                  identifier={\"resume\"}\n                />\n              </Grid>\n              <Grid item>\n                <FileUploadInput\n                  className={classes.inputBox}\n                  label=\"Profile Photo (.jpg/.png)\"\n                  icon={<FaceIcon />}\n                  uploadTo={apiList.uploadProfileImage}\n                  handleInput={handleInput}\n                  identifier={\"profile\"}\n                />\n              </Grid>\n            </Grid>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              style={{ padding: \"10px 50px\", marginTop: \"30px\" }}\n              onClick={() => handleUpdate()}\n            >\n              Update Details\n            </Button>\n          </Paper>\n        </Grid>\n      </Grid>\n      {/* <Modal open={open} onClose={handleClose} className={classes.popupDialog}> */}\n\n      {/* </Modal> */}\n    </>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}